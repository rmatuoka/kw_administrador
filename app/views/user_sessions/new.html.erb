<%content_for :head do%>
<script>
	var htmlold = "";
	
	function novoConteudo(){
		
		htmlold = jQuery('box_login').html();
		var novo = jQuery.ajax({
			url: '/users/new',
		    type:'get',
			beforeSend: function (){
				//alert("loading");
				jQuery('#loading-forgot').show();
			},
		    success: function(response){
		        //alert(response);
				jQuery('#loading-forgot').hide();
				//alert("Success! \n\n" + response);
				jQuery('#box_login').html(response); 
		    },
		    error: function(){ 
				alert('Falha ao carregar a p√°gina!') ;
				jQuery('#loading-forgot').hide();
			}
		  })
	/*	var data = "";
		jQuery.ajaxSetup({
			url: '/users/new',
		    type:'get'
		});
		
		jQuery.ajax(); 

		jQuery('#box_login').ajaxError(function() {
			jQuery(this).text('ajaxError handler called.');
		}); 

		jQuery('#box_login').ajaxSuccess(function(e, data) {
			alert(data.responseHTML);
			//jQuery(this).html(response.responseHTML);
		});  

		jQuery('#loading-forgot').ajaxStart(function() {
			//jQuery(this).show();
		}); 
		jQuery('#loading-forgot').ajaxStop(function() {
			//jQuery(this).hide();
		}); 
	*/
	}



	
	function voltaConteudo(){
		jQuery('BoxContent').update(htmlold); 
		htmlold = "";		
	}

</script>
<%end%>
<div id="box_login">
	<%= form_for @user_session, :remote => true do |f| %>
		<div id="flash_error_login" style="display:none;"></div>
		<p>
			<%= f.label :email, "Email" %><br />
			<%= f.text_field :email %>
		</p>
		<p>
			<%= f.label :password, "Senha" %><br />
			<%= f.password_field :password %>
		</p>
		<p><%= f.submit "Enviar" %></p>
		<%= image_tag "loading.gif", :style => 'display:none;', :id => 'loading-forgot' %>
		<p class="EsqueciSenha">
			<%= link_to "esqueci a senha", "#", :onclick=>"novoConteudo()" %>
		</p>
	<% end %>
</div>
